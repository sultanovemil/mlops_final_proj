# Команда 21
* Болотов М.В.
* Пахомов Д.Е.
* Сокирка А.В.
* Султанов Э.М.
* Шибакова А.А.

### Итоговый проект (PJ) доступен по [ссылке](https://huggingface.co/spaces/Emil25/mlops_final_project) на ```Hugging Face Spaces```. 

### Цель проекта: разработать конвеер машинного обучения data-продукта (Веб-приложение).

# Веб-приложение для предсказания съедобности грибов

Данное веб-приложение определяет, является ли гриб съедобным или ядовитым, на основе модели, обученной на наборе данных "Mushroom Dataset for Binary Classification".

![pipeline](https://drive.google.com/uc?export=view&id=1rIlkQf-ZJLRWwECM978oiaD_IWBc9y3G)

![pipeline](https://drive.google.com/uc?export=view&id=1DJkfeyeKDUyPElrekVUId76dPzqwTx4Q)

![pipeline](https://drive.google.com/uc?export=view&id=1SNs7sDyga8NNODK3ElRm8Z7kih0C3tap)

## Этапы сборки и развертывания

Сборка и развертывание проекта осуществляется с помощью Jenkins Pipeline, содержащей следующие этапы:

1. **Клонирование репозитория из Github:** Репозиторий проекта клонируется с Github для выполнения последующих шагов.
2. **Настройка и активация виртуальной среды и установка зависимостей:** На этом этапе создается виртуальная среда, в которой устанавливаются все необходимые зависимости для работы проекта, включая DVC.
3. **Загрузка данных:** Данные для обучения и тестирования модели загружаются с Google Drive.
4. **Тестирование набора данных:** Проводится проверка данных на наличие пропусков, аномалий и других потенциальных проблем.
5. **Предварительная обработка:** Выполняется скрипт preprocessing.py для предварительной обработки набора данных. Он разделяет данные на обучающие и тестовые наборы, выполняет стандартизацию и сохраняет обработанные наборы данных в виде CSV-файлов.
6. **Обучение модели:** Запускается скрипт train_model.py для обучения модели с использованием предварительно обработанных обучающих данных. Для обучения модели используется классификатор "Random Forest Classifier" из библиотеки Scikit-learn. Обученная модель затем сохраняется в виде файла pickle в Google Drive и версионируется с помощью DVC и Git.
7. **Метрики:** После обучения модели вычисляются различные метрики качества (accuracy, precision, recall and F1 score) с помощью скрипта metrics.py.
8. **Тестирование модели:** Модель тестируется на отложенной выборке данных с помощью скрипта test_model.py, чтобы оценить ее способность к обобщению.
9. **Создание контейнера Docker:** Создается контейнер Docker с использованием Dockerfile, который включает необходимые зависимости и конфигурации для веб-приложения.
10. **Запуск контейнера Docker:** Запускается Docker-контейнер, и веб-приложение становится доступным для использования на порту 8501.

## Автоматизированная сборка и развертывание

Проект включает в себя автоматизированный процесс сборки и развертывания с использованием Jenkins. Файл Jenkinsfile определяет этапы и шаги конвейера. Чтобы настроить конвейер Jenkins, выполните следующие шаги:

1. Установите и настройте Jenkins на вашей системе.
2. Создайте новую задачу Jenkins и настройте ее для использования Jenkinsfile из репозитория проекта.
3. Запустите задачу Jenkins для начала автоматизированного процесса сборки и развертывания.
4. Для доступа к веб-приложению откройте веб-браузер и перейдите по адресу http://localhost:8501

Конвейер Jenkins выполнит клонирование репозитория, настройку виртуальной среды, установку зависимостей, загрузку данных, предварительную обработку набора данных, обучение модели, расчет метрик, тестирование модели, создание Docker контейнера и его запуск.

## Использованные инструменты и технологии

- ```Python```: основной язык программирования проекта.
- ```Jenkins```: для автоматизации сборки и развертывания проекта.
- ```Git```: для контроля версий.
- ```DVC```: для контроля версий модели.
- ```Docker```: для контейнеризации веб-приложения.
- ```Scikit-learn```: для обучения и оценки модели машинного обучения.
